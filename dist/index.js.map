{"version":3,"sources":["../src/index.js"],"names":["React","withStyles","classNames","Avatar","PersonIcon","Button","Typography","Enum","Dialog","DialogTitle","DialogContent","List","ListItem","ListItemAvatar","ListItemIcon","ListItemText","EventListener","NewWindow","Timer","thunk","createStore","combineReducers","applyMiddleware","compose","Provider","connect","AuthContext","createContext","ACTIONS","defaultState","config","authBase","process","env","AUTH_BASE","ready","me","e","login","providers","provider","providerRoles","timerId","timeLeft","currentTime","tokens","reducer","state","action","type","AUTH_READY","AUTH_CONFIG","AUTH_ME","AUTH_ERROR","AUTH_LOGIN","AUTH_LOGIN_CANCEL","AUTH_LOGIN_PROVIDERS","AUTH_LOGIN_PROVIDER","AUTH_SESSION_TIME","AUTH_PROVIDER_ROLES","result","name","roles","AUTH_TOKEN","token","newTokens","undefined","enhancer","store","auth","authTryCatch","handler","dispatch","getState","resolve","reject","onCatch","console","error","then","authFetch","path","Error","fetch","credentials","headers","accept","pragma","data","json","authConfig","authUserMe","authLoginCancel","authLogin","authLogout","AUTH_LOGOUT","authLoginProvider","authProviderDone","redirectTo","window","location","all","authIsSessionActive","foo","isSessionActiveResult","isSessionActive","clearTimeout","whenToCheck","newTimerId","authTouchSession","authPick","picked","Component","mapDispatchToProps","pick","handleTouchSession","handleLoginRequest","handleLogoutRequest","handleLoginCancel","handleLoginProvider","handleAuthProviderDone","mapStateToProps","props","authReady","ConnectedComponent","context","AuthAvatar","log","profilePic","loginStyles","LoginButton","classes","children","userId","loginIcon","logoutStyles","LogoutButton","AuthSecurityWrapper","autoLogin","authDenied","newState","LoginHandlers","onLoggedIn","user","LoginPopup","event","features","handleOnMessage","href","width","height","LoginProviders","logo","title","LoginDialog","AuthTimeoutDialog","warnThreshold","AuthTimeRemaining","createRef","timer","timerRef","current","setTime","start","ifThen","ifCatch","authGetToken","getToken"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {withStyles} from '@material-ui/core/styles'\nimport classNames from 'classnames'\nimport Avatar from '@material-ui/core/Avatar'\nimport PersonIcon from '@material-ui/icons/Person'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\n\nimport Enum from 'es6-enum'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport EventListener from 'react-event-listener'\nimport NewWindow from 'react-new-window'\nimport Timer from 'react-compound-timer'\n\nimport thunk from 'redux-thunk'\nimport {createStore, combineReducers, applyMiddleware, compose} from 'redux'\nimport {Provider, connect} from 'react-redux'\n\nconst AuthContext = React.createContext()\n\nconst ACTIONS = Enum(\n  'AUTH_CONFIG',\n  'AUTH_READY',\n  'AUTH_ME',\n  'AUTH_ERROR',\n  'AUTH_LOGIN',\n  'AUTH_LOGIN_CANCEL',\n  'AUTH_LOGOUT',\n\n  'AUTH_LOGIN_PROVIDER',\n  'AUTH_LOGIN_PROVIDERS',\n\n  'AUTH_SESSION_TIME',\n\n  'AUTH_PROVIDER_ROLES',\n\n  'AUTH_TOKEN',\n)\n\nconst defaultState = {\n  config: {\n    authBase: process.env.AUTH_BASE,\n  },\n  ready: false,\n  me: null,\n  e: null,\n  login: false,\n  providers: [],\n  provider: null,\n  providerRoles: {},\n\n  timerId: null,\n  timeLeft: null,\n  currentTime: null,\n\n  tokens: {},\n}\nexport function reducer(state = defaultState, action) {\n  switch (action.type) {\n    case ACTIONS.AUTH_READY:\n      state = {...state, ready: true}\n      break\n    case ACTIONS.AUTH_CONFIG:\n      state = {...state, config: {...state.config, ...action.config}}\n      break\n    case ACTIONS.AUTH_ME:\n      state = {...state, me: action.me}\n      break\n    case ACTIONS.AUTH_ERROR:\n      state = {...state, e: action.e}\n      break\n    case ACTIONS.AUTH_LOGIN:\n      state = {...state, login: true, providers: []}\n      break\n    case ACTIONS.AUTH_LOGIN_CANCEL:\n      state = {...state, login: false, providers: [], provider: null}\n      break\n    case ACTIONS.AUTH_LOGIN_PROVIDERS:\n      state = {...state, providers: action.providers}\n      break\n    case ACTIONS.AUTH_LOGIN_PROVIDER:\n      state = {...state, provider: action.provider}\n      break\n    case ACTIONS.AUTH_LOGIN_PROVIDER:\n      state = {...state, provider: action.provider}\n      break\n    case ACTIONS.AUTH_SESSION_TIME:\n      state = {...state, timerId: action.timerId, timeLeft: action.timeLeft, currentTime: action.currentTime}\n      break\n    case ACTIONS.AUTH_PROVIDER_ROLES: {\n      state = {...state, providerRoles: Object.entries(action.providerRoles).reduce((result, [name, roles]) => {\n        if (roles === null) {\n          if (result[name]) {\n            result = {...result}\n            delete result[name]\n          }\n        } else if (JSON.stringify(result[name]) !== JSON.stringify(roles)) {\n          result = {...result, [name]: roles}\n        }\n        return result\n      }, state.providerRoles)}\n      break\n    }\n    case ACTIONS.AUTH_TOKEN: {\n      const {tokens} = state\n      const {name, token} = action\n      if (tokens[name] !== token) {\n        const newTokens = {...tokens}\n        if (token === undefined) {\n          delete newTokens[name]\n        } else {\n          newTokens[name] = token\n        }\n        state = {...state, tokens: newTokens}\n      }\n      break\n    }\n    default:\n      return state\n  }\n  return state\n}\n\nconst enhancer = compose(\n  applyMiddleware(thunk),\n)\nconst store = createStore(\n  combineReducers({\n    auth: reducer,\n  }),\n  compose(applyMiddleware(thunk)),\n)\n  \nconst authTryCatch = handler => {\n  return (dispatch, getState) => {\n    return new Promise((resolve, reject) => {\n      const onCatch = e => {\n        console.error(e)\n        dispatch({type: ACTIONS.AUTH_ERROR, e})\n        reject(e)\n      }\n      try {\n        handler(dispatch, getState).then(resolve, onCatch)\n      } catch(e) {\n        onCatch(e)\n      }\n    })\n  }\n}\nconst authFetch = (dispatch, getState, path) => {\n  const {auth: {config: {authBase}, e}} = getState()\n  if (authBase === undefined) {\n    throw new Error('Please define process.env.AUTH_BASE')\n  }\n  return fetch(`${authBase}${path}`, {\n      credentials: 'include',\n      headers: {\n        accept: 'application/json',\n\t\t\t\tpragma: 'no-cache',\n\t\t\t\t'cache-control': 'no-cache',\n      },\n  }).then(data => data.json())\n}\n\nconst authConfig = config => {type: ACTIONS.AUTH_CONFIG, config}\nconst authUserMe = () => authTryCatch((dispatch, getState) => {\n  return authFetch(dispatch, getState, '/auth/me').then(me => {\n    dispatch({type: ACTIONS.AUTH_ME, me})\n  })\n})\n\nconst authLoginCancel = () => ({type: ACTIONS.AUTH_LOGIN_CANCEL})\nconst authLogin = () => authTryCatch((dispatch, getState) => {\n  dispatch({type: ACTIONS.AUTH_LOGIN})\n  return authFetch(dispatch, getState, '/auth/providers').then(providers => {\n    dispatch({type: ACTIONS.AUTH_LOGIN_PROVIDERS, providers})\n  })\n})\n\nconst authLogout = () => authTryCatch((dispatch, getState) => {\n  return authFetch(dispatch, getState, '/auth/logout').then(() => {\n    dispatch({type: ACTIONS.AUTH_LOGOUT})\n    return dispatch(authUserMe())\n  })\n})\n\nconst authLoginProvider = provider => (dispatch, getState) => {\n  dispatch({type: ACTIONS.AUTH_LOGIN_PROVIDER, provider})\n}\n\nconst authProviderDone = redirectTo => (dispatch, getState) => {\n  dispatch({type: ACTIONS.AUTH_LOGIN_CANCEL})\n  const {auth: {tokens}} = getState()\n  Object.entries(tokens).forEach(([name, token]) => dispatch({type: ACTIONS.AUTH_TOKEN, name, token}))\n  if (redirectTo) {\n    window.location = redirectTo\n    return\n  }\n  return Promise.all([\n    dispatch(authUserMe()),\n    dispatch(authIsSessionActive()),\n  ])\n}\n\nconst authIsSessionActive = () => authTryCatch((dispatch, getState) => {\n  const foo = getState().auth\n  return authFetch(dispatch, getState, `/auth/isSessionActive?foo=${foo.currentTime}&bar=${foo.timeLeft}`).then(isSessionActiveResult => {\n    const {isSessionActive} = isSessionActiveResult\n    const {auth: {timerId}} = getState()\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n    const currentTime = Date.now()\n    let whenToCheck\n    if (isSessionActive > 5*60*1000) {\n      // more than 5m\n      whenToCheck = isSessionActive - 5*60*1000\n    } else if (isSessionActive > 1*60*1000) {\n      // between 1m and 5m\n      whenToCheck = isSessionActive - 1*60*1000\n    } else if (isSessionActive > 5*1000) {\n      // between 5s and 1m\n      whenToCheck = isSessionActive - 5*1000\n    } else if (isSessionActive) {\n      whenToCheck = isSessionActive\n    }\n    const newTimerId = whenToCheck && whenToCheck >= 0 ? setTimeout(() => dispatch(authIsSessionActive()), whenToCheck) : null\n    dispatch({type: ACTIONS.AUTH_SESSION_TIME, currentTime, timeLeft: isSessionActive, timerId: newTimerId})\n    if (!whenToCheck || whenToCheck <= 0) {\n      return dispatch(authUserMe())\n    }\n  })\n})\n\nconst authTouchSession = () => authTryCatch((dispatch, getState) => {\n  return authFetch(dispatch, getState, '/auth/isSessionActive?touch=true').then(() => {\n    return Promise.all([\n      dispatch(authIsSessionActive()),\n      dispatch(authUserMe()),\n    ])\n  })\n})\n\nconst authPick = (...picked) => Component => {\n  const mapDispatchToProps = {}\n  for (const pick of picked) {\n    switch (pick) {\n      case 'extend-session':\n        mapDispatchToProps.handleTouchSession = authTouchSession\n        break\n      case 'me':\n        break\n      case 'login':\n        mapDispatchToProps.handleLoginRequest = authLogin\n        break\n      case 'logout':\n        mapDispatchToProps.handleLogoutRequest = authLogout\n        break\n      case 'dialog':\n        mapDispatchToProps.handleLoginCancel = authLoginCancel\n        mapDispatchToProps.handleLoginProvider = authLoginProvider\n        break\n      case 'popup':\n        mapDispatchToProps.handleAuthProviderDone = authProviderDone\n        break\n      case 'time':\n        break\n    }\n  }\n  function mapStateToProps(store, props) {\n    const {auth} = store\n    const result = {}\n    for (const pick of picked) {\n      switch (pick) {\n        case 'me':\n          result.me = auth.me\n          break\n        case 'ready':\n          result.authReady = auth.ready\n          break\n        case 'login':\n          break\n        case 'logout':\n          break\n        case 'dialog':\n          result.login = auth.login\n          result.providers = auth.providers\n          result.provider = auth.provider\n          break\n        case 'popup':\n          result.provider = auth.provider\n          result.authBase = auth.config.authBase\n          break\n        case 'time':\n          result.currentTime = auth.currentTime\n          result.timeLeft = auth.timeLeft\n          break\n      }\n    }\n    return result\n  }\n  const ConnectedComponent = connect(mapStateToProps, mapDispatchToProps, null, {context: AuthContext})(Component)\n  return props => <Provider context={AuthContext} store={store}><ConnectedComponent {...props}/></Provider>\n}\n\nclass AuthAvatar extends React.Component {\n  render() {\n    const {me} = this.props\n    console.log('Auth:AuthAvatar', me)\n    if (me && me.profilePic) {\n      return <Avatar src={me.profilePic}/>\n    } else {\n      return <PersonIcon/>\n    }\n  }\n}\n\nconst loginStyles = {}\nconst LoginButton = withStyles(loginStyles)(class LoginButton extends React.Component {\n  static defaultProps = {\n    handleLoginRequest() {},\n  }\n\n  render() {\n    const {classes, children, me, handleLoginRequest} = this.props\n    console.log('Auth:LoginButton', me)\n    if (me && me.userId !== undefined) {\n      return <React.Fragment />\n    }\n    return <Button className={classes.loginIcon} color=\"inherit\" onClick={handleLoginRequest}>\n      {children}\n    </Button>\n  }\n})\n\nconst logoutStyles = {}\nconst LogoutButton = withStyles(logoutStyles)(class LogoutButton extends React.Component {\n  static defaultProps = {\n    handleLogoutRequest() {},\n  }\n\n  render() {\n    const {classes, children, me, handleLogoutRequest} = this.props\n    console.log('Auth:LogoutButton', me)\n    if (me && me.userId !== undefined) {\n      return <Button className={classes.loginIcon} color=\"inherit\" onClick={handleLogoutRequest}>\n        {children}\n      </Button>\n    }\n    return <React.Fragment />\n  }\n})\n\nclass AuthSecurityWrapper extends React.Component {\n  static defaultProps = {\n    authReady: false,\n    me: null,\n    handleLoginRequest() {},\n\n    autoLogin: false,\n    authDenied: <div><h1>Denied!</h1></div>,\n  }\n\n  state = {}\n\n  static getDerivedStateFromProps(props, state) {\n    const newState = {}\n    const {authReady, me, autoLogin} = props\n    if (authReady) {\n      if (!me || me.userId === undefined) {\n        if (autoLogin) {\n          props.handleLoginRequest()\n        }\n      }\n    }\n    return newState\n  }\n\n  render() {\n    const {me, autoLogin, authDenied, children} = this.props\n\n    console.log('Auth:AuthSecurityWrapper', me, children)\n    if (me && me.userId !== undefined) {\n      return children\n    }\n    if (autoLogin) {\n      return <div/>\n    } else {\n      return authDenied\n    }\n  }\n}\n\nclass LoginHandlers extends React.Component {\n  static defaultProps = {\n    me: null,\n\n    onLoggedIn(user) {}\n  }\n\n  state = {}\n\n  static getDerivedStateFromProps(props, state) {\n    // data\n    const {me} = props\n    // handlers\n    const {onLoggedIn} = props\n    onLoggedIn(me)\n  }\n\n  render() {\n    return <div/>\n  }\n}\n\nclass LoginPopup extends React.Component {\n  static defaultProps = {\n    authBase: null,\n    provider: null,\n    redirectTo: null,\n    handleAuthProviderDone() {},\n    features: {\n      width: 640,\n      height: 480,\n    },\n  }\n\n  handleOnMessage = event => {\n    console.log('Auth:LoginPopup:handleOnMessage', event)\n    const {data} = event || {}\n    if (!data) {\n      return\n    }\n    const {type, redirectTo} = data\n    if (type === 'authProviderDone') {\n      this.props.handleAuthProviderDone(redirectTo)\n    }\n  }\n\n  render() {\n    const {authBase, provider, features, redirectTo} = this.props\n    console.log('Auth:LoginPopup', provider)\n    if (provider) {\n      return <div>\n        <EventListener target={window} onMessage={this.handleOnMessage}>\n          <NewWindow url={`${authBase}${provider.href}?authView=window`} features={features}/>\n        </EventListener>\n      </div>\n    } else if (redirectTo) {\n      window.location = redirectTo\n    } else {\n      return <div/>\n    }\n  }\n}\n\nclass LoginProviders extends React.Component {\n  static defaultProps = {\n    handleLoginProvider(provider) {},\n    providers: [],\n  }\n\n  render() {\n    const {providers, handleLoginProvider} = this.props\n    console.log('Auth:LoginProviders', providers)\n\n    return <List>\n      {providers.map(provider => {\n        const {name, href, logo, title} = provider\n        return <ListItem key={name} button onClick={() => handleLoginProvider(provider)}>\n          <ListItemIcon><img width=\"64\" height=\"64\" src={logo}/></ListItemIcon>\n          <ListItemText primary={title} secondary={name}/>\n        </ListItem>\n      })}\n    </List>\n  }\n}\n\nclass LoginDialog extends React.Component {\n  static defaultProps = {\n    handleLoginCancel() {},\n    handleLoginProvider(provider) {},\n    login: false,\n    providers: [],\n    provider: null,\n  }\n\n  render() {\n    const {login, providers, provider, handleLoginCancel, handleLoginProvider} = this.props\n    console.log('Auth:LoginDialog', login, providers, provider)\n\n    if (login) {\n      if (provider) {\n        // FIXME: don't use Dialog just to prevent global input\n        return <Dialog open={true}>\n        </Dialog>\n      } else {\n        return <Dialog open={true} onClose={handleLoginCancel}>\n          <DialogTitle>Login</DialogTitle>\n          <DialogContent>\n            <List>\n              {providers.map(provider => {\n                const {name, href, logo, title} = provider\n                return <ListItem key={name} button onClick={() => handleLoginProvider(provider)}>\n                  <ListItemIcon><img width=\"64\" height=\"64\" src={logo}/></ListItemIcon>\n                  <ListItemText primary={title} secondary={name}/>\n                </ListItem>\n              })}\n            </List>\n          </DialogContent>\n        </Dialog>\n      }\n    } else {\n      return <React.Fragment/>\n    }\n  }\n}\n\nclass AuthTimeoutDialog extends React.Component {\n  static defaultProps = {\n    me: null,\n    currentTime: null,\n    timeLeft: null,\n    handleTouchSession() {\n      debugger\n    },\n\n    title: 'Session is about to expire!',\n    warnThreshold: 5*60*1000,\n  }\n\n  render() {\n    const {me, currentTime, timeLeft, handleTouchSession, title, warnThreshold, children} = this.props\n\n    console.log('AuthTimeoutDialog', timeLeft, handleTouchSession, children)\n    if (!me || me.userId === undefined || !timeLeft || timeLeft === 0 || timeLeft >= warnThreshold) {\n      return <div />\n    }\n    return <Dialog open={true} onClose={handleTouchSession}>\n      <DialogTitle>{title} (me:{JSON.stringify(me)})</DialogTitle>\n      <DialogContent children={children}/>\n    </Dialog>\n  }\n}\n\nclass AuthTimeRemaining extends React.Component {\n  static defaultProps = {\n    me: null,\n    currentTime: null,\n    timeLeft: null,\n  }\n\n  timerRef = React.createRef()\n\n  componentDidUpdate() {\n    const {timerRef: {current: timer}} = this\n    console.log('componentDidUpdate', timer, this.props)\n    if (timer) {\n      //timer.reset()\n      timer.setTime(this.props.timeLeft)\n      console.log('======= STARTING A')\n      timer.start()\n    }\n  }\n\n  componentDidMount() {\n    const {timerRef: {current: timer}} = this\n    console.log('componentDidMount', timer, this.props)\n    if (timer) {\n      console.log('======= STARTING B')\n      timer.start()\n    }\n  }\n\n  render() {\n    const {me, currentTime, timeLeft} = this.props\n\n    if (!me || me.userId === undefined || !timeLeft || timeLeft === 0) {\n      return <div/>\n    }\n\n    console.log('AuthTimeRemaining:render', currentTime, timeLeft)\n    return <Timer ref={this.timerRef} startImmediately={true} initialTime={timeLeft} direction='backward'>{() => <React.Fragment>\n      <Timer.Days/> days\n      <Timer.Hours/> hours\n      <Timer.Minutes/> minutes\n      <Timer.Seconds/> seconds\n      <Timer.Milliseconds/> milliseconds\n    </React.Fragment>}\n    </Timer>\n    /*\n      <Timer.Consumer>{timerProps => {\n        const {d, m, h, s, ms, formatValue} = timerProps\n        if (d > 1) {\n          return <Typography>{formatValue(d)} days</Typography>\n        } else if (d) {\n          return <Typography>{formatValue(d)} day</Typography>\n        } else if (h > 1) {\n          return <Typography>{formatValue(h)} hours</Typography>\n        } else if (h) {\n          return <Typography>{formatValue(h)} hour</Typography>\n        } else if (m > 1) {\n          return <Typography>{formatValue(m)} minutes</Typography>\n        } else if (m) {\n          return <Typography>{formatValue(m)} minute</Typography>\n        } else if (s > 1) {\n          return <Typography>{formatValue(s)} seconds</Typography>\n        } else if (s || ms) {\n          return <Typography>{formatValue(s)} second</Typography>\n        } else if (ms) {\n          return <Typography>{formatValue(s)} seconds</Typography>\n        } else {\n          return null\n        }\n      }}</Timer.Consumer>\n\n        {formatValue(d)} days\n        {formatValue(h)} hours\n        {formatValue(m)} minutes\n        {formatValue(s)} seconds\n        {formatValue(ms)} milliseconds\n        <Typography>Click anywhere to continue</Typography>\n      </DialogContent>\n      */\n  }\n}\n\nconst authReady = (() => {\n  let authReady\n  const ifThen = (ifThen, ifCatch) => {\n    if (!authReady) {\n      authReady = store.dispatch((dispatch, getState) => {\n        return Promise.all([\n          dispatch(authUserMe()),\n          dispatch(authIsSessionActive()),\n        ]).then(() => {\n          dispatch({type: ACTIONS.AUTH_READY})\n        })\n      })\n    }\n    return authReady.then(ifThen, ifCatch)\n  }\n  const ifCatch = ifCatch => then(undefined, ifCatch)\n  return {then: ifThen, catch: ifCatch}\n})()\n\nfunction authGetToken(name) {\n  return store.dispatch(authTryCatch((dispatch, getState) => authReady.then(() => {\n    const {auth: {tokens: {[name]: token}}} = getState()\n    if (token !== undefined) {\n      return token\n    }\n    return authFetch(dispatch, getState, '/auth/token/' + name).then(result => {\n      const {token} = result\n      dispatch({type: ACTIONS.AUTH_TOKEN, name, token})\n      return token\n    })\n  })))\n}\n\nexport default {\n  getToken: authGetToken,\n  authReady,\n  AuthAvatar: authPick('me')(AuthAvatar),\n  AuthSecurityWrapper: authPick('ready', 'login', 'logout', 'me')(AuthSecurityWrapper),\n  LogoutButton: authPick('logout', 'me')(LogoutButton),\n  LoginButton: authPick('login', 'me')(LoginButton),\n  LoginDialog: authPick('dialog')(LoginDialog),\n  LoginHandlers: authPick('me')(LoginHandlers),\n  LoginPopup: authPick('popup')(LoginPopup),\n  AuthTimeoutDialog: authPick('extend-session', 'me', 'time')(AuthTimeoutDialog),\n  AuthTimeRemaining: authPick('extend-session', 'me', 'time')(AuthTimeRemaining),\n}\n\n\n"],"file":"index.js"}